---
import Link from "@components/Links.astro";
import { Icon } from "astro-icon/components";
import { SITE_TITLE, HeaderLinks } from "@consts";

const isDev = import.meta.env.DEV;
const base = isDev ? 'http://localhost:4321' : Astro.site.href;
const resolve = (path) => new URL(path, base).href;
---

<header class="sticky top-0 z-50 bg-white dark:bg-gray-900 flex flex-wrap md:justify-start md:flex-nowrap w-full py-7 shadow-sm">
  <nav class="relative max-w-7xl w-full flex flex-wrap md:grid md:grid-cols-12 basis-full items-center px-4 mx-auto" aria-label="Global">
    
    <!-- Left: Site Title -->
    <div class="md:col-span-3">
      <a class="flex-none text-xl font-semibold text-neutral-900 hover:text-neutral-600 dark:text-neutral-400 dark:hover:text-neutral-200" href={resolve('/')} aria-label="Astroverse">
        {SITE_TITLE}
      </a>
    </div>

    <!-- Right: Search + Theme Toggle (commented out) -->
    <div class="flex items-center gap-x-2 ms-auto py-1 md:ps-6 md:order-2 md:col-span-3">
      {/*
      <button type="button" class="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-xl border border-transparent text-black hover:bg-neutral-100 dark:text-white dark:hover:bg-neutral-700 transition disabled:opacity-50 disabled:pointer-events-none" onclick={`window.location.href='${resolve('/search/')}'`}>
        <Icon name="tabler:search" class="icon-base" />
      </button>
      */}
    </div>

    <!-- Right: Blog/About Menu -->
    <div id="navbar-collapse-with-animation" class="hs-collapse hidden overflow-hidden transition-all duration-300 basis-full grow md:block md:w-auto md:basis-auto md:order-3 md:col-span-6 ms-auto">
      <div class="flex flex-col gap-y-4 gap-x-0 mt-5 md:flex-row md:justify-end md:items-center md:gap-y-0 md:gap-x-7 md:mt-0">
        {
          HeaderLinks.map((link) => (
            <Link
              href={resolve(link.href)}
              class="px-4 py-3 font-medium text-neutral-900 hover:text-neutral-600 dark:text-neutral-400 dark:hover:text-neutral-200"
            >
              {link.title}
            </Link>
          ))
        }
      </div>
    </div>

  </nav>
</header>
