---
interface Item {
  title: string;
  url: string;
}

interface Props {
  title: string;
  description: string;
  url?: string;
  type?: string;
  featuredImage?: string;
  datePublished?: string;
  dateModified?: string;
  wordCount?: number;
  articleBody?: string;
  itemList?: Item[];
}

const {
  title,
  description,
  url,
  type,
  featuredImage,
  datePublished,
  dateModified,
  wordCount,
  articleBody,
  itemList = []
} = Astro.props;
---

{type === 'home' && (
  <script type="application/ld+json" set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "Organization",
    name: "Echo Reader",
    alternateName: "Echo",
    url: "https://wildgreen.blog/",
    logo: "https://wildgreen.blog/favicon.ico",
    description: "WildGreen Blog â€” Sustainable Travel & Eco-Living for the Conscious Explorer",
    sameAs: [
      "https://www.linkedin.com/in/echo-reader/",
      "https://www.facebook.com/profile.php?id=61569116903478",
      "https://x.com/echo_reader"
    ],
    contactPoint: {
      "@type": "ContactPoint",
      contactType: "customer service",
      email: "tom.bisnis@gmail.com"
    }
  })} />
)}

{type === 'about' && (
  <script type="application/ld+json" set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "ProfilePage",
    mainEntity: {
      "@type": "Person",
      name: "Echo Reader",
      alternateName: "Echo",
      description,
      url,
      address: {
        "@type": "PostalAddress",
        addressLocality: "Chattanooga",
        addressRegion: "TN",
        addressCountry: "US"
      },
      sameAs: [
        "https://x.com/echo_reader",
        "https://github.com/echoreader",
        "https://www.linkedin.com/in/echo-reader/"
      ]
    }
  })} />
)}

{type === 'post' && (
  <>
    <script type="application/ld+json" set:html={JSON.stringify({
      "@context": "https://schema.org",
      "@type": "Article",
      "@id": url,
      headline: title,
      description,
      datePublished: datePublished ? new Date(datePublished).toISOString() : undefined,
      dateModified: dateModified ? new Date(dateModified).toISOString() : undefined,
      author: { "@type": "Person", name: "Echo Reader" },
      publisher: {
        "@type": "Organization",
        name: "Echo Reader",
        url: "https://wildgreen.blog/",
        logo: { "@type": "ImageObject", url: "https://wildgreen.blog/favicon.ico" }
      },
      mainEntityOfPage: { "@type": "WebPage", "@id": url },
      image: featuredImage || "https://wildgreen.blog/default-cover.jpg",
      wordCount: wordCount || 500,
      articleBody: articleBody || description
    })} />

    <script type="application/ld+json" set:html={JSON.stringify({
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      itemListElement: itemList.map((item: Item, i: number) => ({
        "@type": "ListItem",
        position: i + 1,
        name: item.title,
        item: { "@id": item.url }
      }))
    })} />
  </>
)}
